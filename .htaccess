# Enable rewrite engine
RewriteEngine On

# Set WASM MIME type
AddType application/wasm .wasm

# Enable compression for text-based files
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/css text/javascript application/javascript application/json image/svg+xml application/wasm
</IfModule>

# Exclude the clipper2 folder from URL rewriting
RewriteCond %{REQUEST_URI} !^/clipper2/ [NC]

# Remove .html extension from URLs
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.html [NC,L]

# Redirect .html to clean URLs (optional, prevents duplicate content)
RewriteCond %{THE_REQUEST} \s/+([^/]+)\.html[\s?] [NC]
RewriteRule ^(.+)\.html$ /$1 [R=301,L]

# Set index.html as directory index
DirectoryIndex index.html

# Disable MultiViews to prevent conflicts
Options -MultiViews
